# 记一次ssr应用生产全局状态污染

工作中总会遇到各种稀奇古怪的问题，这次这个问题耗费整整两天才排查出来，坑，巨坑！给大家引以为戒！

## 问题描述

**现象：**用户登录时，**偶发**的出现登录后登录信息不展示问题！

**问题来源：**

用户：小xxx啊，客户反应我们系统老是登录不上去啊，你看看？

我：还有这种事？我看看。登录ing...没问题啊老板。

老板：我看看，哎好像确实没问题，我再去和客户确认下。

一段时间后...

老板：小xxx啊，客户还是反应有问题啊，你再看看。

我：不可能啊，我再看看！（内心：nmd 什么鬼，肯定是客户电脑有问题，浏览器有问题，我这不好好的。哎老板发话了那就先看着吧！）

开发最怕遇到什么问题？**偶发**问题。没有规律的问题是最难的问题T T！但是打工人是不能退却的，一退就是房贷车贷老婆孩子。

## 问题排查过程

要解决一个问题，我们首先要做的是定位这个问题。怎么做？当然是先复现一下这个问题，看看是哪个交互操作带来了这个bug。

复现问题->查看业务逻辑->寻找逻辑漏洞->加临时日志->定位问题原因

#### 复现问题

1. 在本地复现，失败
2. 在测试环境复现，失败
3. 在灰度环境复现，失败
4. 在生产环境复现，偶现

本地不能复现，让本就困难的问题定位更加雪上加霜！



## 解决问题





## 经验总结