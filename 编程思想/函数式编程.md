# 函数式编程



## 纯函数



## 可重入函数

**什么是可重入性？**
   ***\*可重入（reentrant）函数可以由多于一个任务并发使用，而不必担心数据错误。相反， 不可重入（non-reentrant）函数不能由超过一个任务所共享，除非能确保函数的互斥（或者使用信号量，或者在代码的关键部分禁用中断）\**** 。可重入 函数可以在任意时刻被中断，稍后再继续运行，不会丢失数据。 可重入函数要么使用本地变量，要么在使用全局变量时保护自己的数据 。

在编写 node 服务时要注意这一点，避免使用全局变量和可共享的状态。尤其是 js 中异步 io 处处都是，更要注意。

```js
// 可重入的
function fn(o) {
  if (!o.name) {
    o.name = 'fn1'
  }
  return o
}


// 不可重入的，o 可能会被影响
let o = {}
function fn() {
  if (!o.name) {
    o.name = 'fn1'
  }
  return o
}
```

