# python 实践——小游戏

这里基于 Pygame 包来开发一个简单的 python 小游戏，让我们来更加熟悉 python。这里记录一些核心的要点。

> Pygame,这是一组功能强大而有趣的模块,可用于管理图形、动画乃至声音, 让你能够更轻松地开发复杂的游戏。通过使用Pygame来处理在屏幕上绘制图像等任务,可将重点放在程序的高级逻辑！

开发任何程序都要有规划，并且规划好每个阶段具体做些什么。

pygame [官方文档](https://www.pygame.org/docs/)：https://www.pygame.org/docs/

**游戏内容：**

在游戏《外星人入侵》中,玩家控制一艘最初出现在屏幕底部中央的飞船。玩家可以使用箭头键左右移动飞船,还可使用空格键射击。游戏开始时,一群外星人出现在天空中,并向屏幕下方移动。玩家的任务是射杀这些外星人。玩家将所有外星人都消灭干净后,将出现一群新的外星人,其移动速度更快。只要有外星人撞到玩家的飞船或到达屏幕底部,玩家就损失一艘飞船。玩家损失三艘飞船后,游戏结束。

## 阶段一：创建一艘飞船并且可以左右移动和开火

> Pygame之所以高效,是因为它让你能够像处理矩形(rect 对象)一样处理所有的游戏元素,即便其形状并非矩形!

#### pygame.display.flip()

在屏幕上绘制，每次循环时擦去旧元素，绘制新元素。在屏幕上不断刷新达成平滑移动的效果。

**所有的元素绘制动作需要在个方法之前调用**，否则屏幕不会更新！

#### pygame.sprite

> 从模块pygame.sprite 导入的Sprite 类。通过使用精灵(sprite),可将游戏中相关的元素编组,进而同时操作编组中的所有元素。

- 对编组调用`update()` 时，编组自动对其中的每个精灵调用`update() `！
- 对编组调用`draw()` 时,Pygame将把编组中的每个元素绘制到属性rect 指定的位置。

## 阶段二：绘制敌人

目标：

- 研究既有代码,确定实现新功能前是否要重构。
- 在屏幕左上角添加一个外星人,并指定合适的边距。
- 根据第一个外星人的边距和屏幕尺寸计算屏幕上可容纳多少个外星人。编写一个循环来创建一系列外星人,使其填满屏幕的上半部分。
- 让外星人群向两边和下方移动,直到外星人被全部击落、有外星人撞到飞船或有外星人抵达屏幕底端。如果整群外星人都被击落,将
- 创建一群外星人。如果有外星人撞到了飞船或抵达屏幕底端,将销毁飞船并再创建一群外星人。
- 限制玩家可用的飞船数量。当配给的飞船用完之后,游戏将结束。

## 阶段三：碰撞检测

碰撞 指的是游戏元素重叠在一起。

要让子弹能够击落外星人我们将使用`sprite.groupcollide() `**检测两个编组的成员之间的碰撞**

接收四个参数：要检测碰撞的两个编组，碰撞后编组1元素是否消失，碰撞后编组2元素是否消失，

```python
 pygame.sprite.groupcollide(self.bullets, self.aliens, True, True)
```

**检查编组是否与 sprite 发生了碰撞**：`pygame.sprite.spritecollideany()`

函数`spritecollideany() `接受两个实参:一个精灵和一个编组。它检查编组是否有成员与精灵发生了碰撞,并在找到与精灵发生碰撞的成员后停止遍历编组!

**检测元素是否与鼠标发生了碰撞**：` play_button.rect.collidepoint(mouse_pos)`，接收一个参数为鼠标点击定位信息对象