# shell 脚本

## 指令说明

## set

```sh
set # 设置shell的执行方式
	-e # 若指令传回值不等于0，则立刻退出 shell
	-v # 显示 shell 所读取的输入值
	-x # 执行指令后，会先显示该指令及所下的参数
```

## if

```shell
if 
```

**1、在中括号中，判断变量的值， 加不加双引号的问题？**

```shell
# 通过 $POD_NAME 判断是否为容器环境
if [[ -n "${POD_NAME}" ]]; then
  pm2 log
fi
```

-z 判断 变量的值，是否为空； zero = 0

- 变量的值，为空，返回0，为true
- 变量的值，非空，返回1，为false

-n 判断变量的值，是否为空  name = 名字

- 变量的值，为空，返回1，为false
- 变量的值，非空，返回0，为true
  pid="123"
    [ -z "$pid" ] 单对中括号变量必须要加双引号
    [[ -z $pid ]]  双对括号，变量不用加双引号

  [ -n "$pid" ] 单对中括号，变量必须要加双引号
  [[ -z $pid ]] 双对中括号，变量不用加双引号

**2、多个条件判断，[] 和 [[]] 的区别？**

[[ ]] 双对中括号，是不能使用 -a 或者 -o的参数进行比较的；

## 变量

```shell
$0 # 脚本名称
$1 # 传入的第一个参数
$* # 所有脚本数组
${@: -1} # 倒数第一个参数（最后一个）
dirname # 当前脚本或命令的执行所在目录
```

## 输出字体颜色

```shell
echo -e "\033[31m 请输入要构建的测试环境 \033[0m" # 输出红色字体
# \033 是 shell 脚本的转义字符
# 31 表示红色 30 是黑色 32 是绿色
```

可以先用变量存储要输出的颜色，用的时候再拿过来，增加可读性

## 参考文章

一篇教会你写90%的shell脚本：https://zhuanlan.zhihu.com/p/264346586
